version: '2'
services:
    secret-server:
        build:
            context: ./docker/
            dockerfile: Dockerfile-nodejs
        ports:
            - 3000:3000
        volumes:
            - "./secret-server:/home/node/projet"
    secret-history-server:
        build:
            context: ./docker/
            dockerfile: Dockerfile-nodejs
        ports:
            - 4002:3000
        volumes:
            - "./secret-history-server:/home/node/projet"
    client:
        image: nginx:latest
        container_name: client
        ports:
            - 80:80
        volumes:
            - "./docker/default.conf:/etc/nginx/conf.d/default.conf"
